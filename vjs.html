<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>360 Video Player</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
      body { margin: 0; overflow: hidden; background: #000; }
      #controls {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        background: rgba(0,0,0,0.5);
        padding: 10px 15px;
        border-radius: 8px;
        color: #fff;
        font-family: sans-serif;
        align-items: center;
      }
      #seek {
        width: 300px;
      }
    </style>
  </head>
  <body>
    <!-- A-Frame Scene -->
    <a-scene>
      <!-- Camera -->
      <a-entity camera look-controls position="0 1.6 0"></a-entity>

      <!-- Sphere with video texture -->
      <a-videosphere id="videosphere" rotation="0 -90 0" radius="500"></a-videosphere>
    </a-scene>

    <!-- Controls -->
    <div id="controls">
      <button id="playPause">Play</button>
      <input type="range" id="seek" min="0" max="100" value="0">
      <span id="time">0:00</span>
    </div>

    <script>
      const video = document.createElement('video');
      video.crossOrigin = "anonymous";
      video.loop = false;
      video.muted = false; // set true if autoplaying in some browsers
      video.playsInline = true;

      const hls = new Hls();
      const videoSrc = "https://public-video-cdn.boops.org/360v5/Untitled.m3u8"; // replace with your HLS URL

      if (Hls.isSupported()) {
        hls.loadSource(videoSrc);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          console.log('HLS manifest loaded');
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = videoSrc;
      }

      const videoSphere = document.querySelector('#videosphere');
      videoSphere.setAttribute('src', video);

      // Controls
      const playPauseBtn = document.getElementById('playPause');
      const seekSlider = document.getElementById('seek');
      const timeDisplay = document.getElementById('time');

      playPauseBtn.addEventListener('click', () => {
        if (video.paused) {
          video.play();
          playPauseBtn.textContent = 'Pause';
        } else {
          video.pause();
          playPauseBtn.textContent = 'Play';
        }
      });

      video.addEventListener('timeupdate', () => {
        const percent = (video.currentTime / video.duration) * 100;
        seekSlider.value = percent || 0;
        const mins = Math.floor(video.currentTime / 60);
        const secs = Math.floor(video.currentTime % 60).toString().padStart(2, '0');
        timeDisplay.textContent = `${mins}:${secs}`;
      });

      seekSlider.addEventListener('input', () => {
        const time = (seekSlider.value / 100) * video.duration;
        video.currentTime = time;
      });
    </script>
  </body>
</html>
